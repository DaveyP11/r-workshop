---
title: "pivot_lobsters"
author: "Dave Parkin"
date: "05/06/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(here)
#install.packages("skimr")
library(skimr)
#install.packages("kableExtra")
library(kableExtra)
```

## read in data
```{r import xlsx}
lobsters <- read_xlsx(here("data/lobsters.xlsx"), skip=4)
```

# explore data
```{r skim summary}
skimr::skim(lobsters)
```
```{r dplyr pivot equivilent}
lobsters  %>%
  group_by(year) %>%
  summarize(count_by_year = n())
```

```{r dplyr pivot no grp}
lobsters %>%
  summarise(count = n())
```

```{r r dplyr pivot grp only}
lobsters %>%
  group_by(year)
```

```{r dplyr pivot 2 groups}
lobsters %>%
  group_by(site, year) %>%
  summarise(count_by_year = n())
```

```{r dplyr pivot 2 groups multiple variables}
lobsters %>%
  group_by(site, year) %>%
  summarise(count_by_siteyear = n(),
            mean_size_mm = mean(size_mm))
```

```{r dplyr pivot 2 groups multiple variables exc NAs}
lobsters %>%
  group_by(site, year) %>%
  summarise(count_by_year = n(),
            mean_size_mm = mean(size_mm, na.rm = TRUE))
```

```{r dplyr pivot 2 groups multiple variables exc NAs2}
lobsters %>%
  group_by(site, year) %>%
  summarise(count_by_year = n(),
            mean_size_mm = mean(size_mm, na.rm = TRUE),
            sd_size_nm = sd(size_mm, na.rm = TRUE))
```

```{r dplyr pivot 2 groups multiple variables exc NAs as variable}
siteyear_summary <- lobsters %>%
  group_by(site, year) %>%
  summarise(count_by_year = n(),
            mean_size_mm = mean(size_mm, na.rm = TRUE),
            sd_size_nm = sd(size_mm, na.rm = TRUE))
```
